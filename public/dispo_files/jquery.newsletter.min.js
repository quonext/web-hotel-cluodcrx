!function($){var _elementos,_opciones;function init(){$(_elementos).find("button").click(function(){var e=$(_elementos).find("input.validation_check").val(),n=$(_elementos).find('input[name="email"]'),o=$(_elementos).find('input[name="nombre"]'),i=$(_elementos).find('input[name="apellido"]'),a=$(n).val();if(_opciones.politica){var t=$(_elementos).find("input[type='checkbox']");if(0==$(t).is(":checked"))return void $(t).fadeOut("fast").fadeIn("fast").fadeOut("fast").fadeIn("fast")}if(""!=a){var s={email:a,honey_trap:e};o&&""!=$(o).val()&&(s.nombre=$(o).val()),i&&""!=$(i).val()&&(s.apellidos=$(i).val()),$.post(_opciones.url_add,s,function(e){e.error||!e.error&&!e.solicita_cancelar?(alert(e.mensaje),e.error||$(n).val("")):(window.confirm(e.mensaje)||$.post(_opciones.url_remove,{email:a},function(e){alert(e.mensaje)},"json"),$(n).val(""))},"json")}else _opciones.msg_no&&alert(_opciones.msg_no)})}$.fn.newsletter=function(opciones,args){if(_elementos=this,"string"==typeof opciones)return eval(opciones)(args);_opciones_default={msg_no:!1,politica:!1,url_add:"/newsletter_engine/add-email/",url_remove:"/newsletter_engine/remove-email/"},_opciones=jQuery.extend(_opciones_default,opciones),init()},$.subscribe_email=function(e){var n=$(_elementos).find('input[name="email"]'),o={};"object"==typeof e?o=e:"string"==typeof e&&(o.email=e),""!=o.email?$.post(_opciones.url_add,o,function(e){e.error||!e.error&&!e.solicita_cancelar?(alert(e.mensaje),e.error||n.length&&n.val("")):(window.confirm(e.mensaje)||$.post(_opciones.url_remove,{email:email},function(e){alert(e.mensaje)},"json"),n.length&&n.val(""))},"json"):_opciones.msg_no&&alert(_opciones.msg_no)}}(jQuery);